<mat-dialog-content class="mat-typography">
  <mat-tab-group>
    <mat-tab label="InformaciÃ³n del mes">
      <button
        mat-raised-button
        style="background-color: #eb7827; color: white"
        (click)="exportAsXLSX()"
        class="button mt-6 mt-4"
      >
        <i class="material-icons">file_download</i>
        EXPORTAR INFO DEL MES
      </button>
      <br />
      <br />

      <h3>
        <b> Selecciona un mes para revisar informacion de los vehiculos </b>
      </h3>
      <input
        type="month"
        name="fecha"
        id="fecha"
        class=""
        [(value)]="Fecha"
        (change)="SendDataonChange($event)"
      />
      <br />
      <table class="table mt-4">
        <thead class="thead-dark">
          <th>Fecha</th>
          &nbsp;&nbsp;
          <th>Nombre y apellido</th>
          &nbsp;&nbsp;
          <th>Reg salida</th>
          &nbsp;&nbsp;
          <th>Reg llegada</th>
          &nbsp;&nbsp;
          <th>Pasajeros</th>
          &nbsp;&nbsp;
          <th>Producido</th>
          &nbsp;&nbsp;
          <th>A.C.P.M</th>
          &nbsp;&nbsp;
          <th>Basico</th>
          &nbsp;&nbsp;
          <th>Gastos varios</th>
          &nbsp;&nbsp;
          <th>Otros</th>
          &nbsp;&nbsp;
          <th>Total gastos</th>
          &nbsp;&nbsp;
          <th>Total diario</th>
        </thead>
        <tbody>
          <tr *ngFor="let item of infoVehiculosMes">
            <td>
              {{ item.fecha }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.conductor.nombre }}
            </td>
            &nbsp;&nbsp;

            <td>
              {{ item.reg_salida }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.reg_llegada }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.reg_llegada - item.reg_salida }}
            </td>
            &nbsp;&nbsp;

            <td>
              {{
                (item.reg_llegada - item.reg_salida) * valorPasaje | currency
              }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.acpm | currency }}
            </td>
            &nbsp;&nbsp;

            <td>
              {{ basico | currency }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.otros_gastos | currency }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.bonificacion | currency }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.total_gastos | currency }}
            </td>
            &nbsp;&nbsp;
            <td>
              {{ item.neto_total | currency }}
            </td>
          </tr>
        </tbody>
      </table>
      <br />
      <footer class="pmd-footer pmd-footer-dark">
        <div class="container">
          <div class="row align-items-center">
            <div class="col">
              <!-- <span style="font-weight: bold; font-size: 20px;" class="pmd-footer-sub-title">TOTAL SUMA NETOS MES  </span>
                            <span style="font-weight: bold; font-size: 20px;" class="pmd-footer-sub-title"> ( {{sumaNetos | currency}} ) </span> -->
              <mat-accordion>
                <mat-expansion-panel
                  (opened)="panelOpenState = true"
                  (closed)="panelOpenState = false"
                  class="disable_ripple"
                >
                  <mat-expansion-panel-header>
                    <mat-panel-title class="textDetail">
                      Resumen de valores por mes
                    </mat-panel-title>
                    <mat-panel-description class="textDetail">
                      NETO TOTAL ( {{ sumaNetos | currency }} )
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <div class="row mt-3">
                    <div class="col-md-4 text">
                      <span>CANTIDAD PASAJEROS : {{ sumaPasajeros }}</span>
                    </div>
                    <div class="col-md-4 text">
                      <span
                        >TOTAL PRODUCIDO :
                        {{ sumaPasajeros * 2080 | currency }}</span
                      >
                    </div>
                    <div class="col-md-4 text">
                      <span>TOTAL A.C.P.M : {{ totalACPM | currency }}</span>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-4 text">
                      <span>TOTAL BASICOS: {{ totalBasicos | currency }}</span>
                    </div>
                    <div class="col-md-4 text">
                      <span
                        >TOTAL BONIFICACIONES:
                        {{ totalBonificaciones | currency }}</span
                      >
                    </div>
                    <div class="col-md-4 textDetail">
                      <span>TOTAL GASTOS : {{ totalGastos | currency }}</span>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-4 text">
                      <span>TOTAL NETO : {{ sumaNetos | currency }}</span>
                    </div>
                    <!-- <div class="col-md-4 text" >
                                            <span>TOTAL GASTOS VARIOS: {{ | currency}}</span>
                                        </div> -->
                  </div>
                  <div *ngIf="sumaNetos != 0" class="row mt-3">
                    <div class="col-md-4 text">
                      <span>LIQUIDO TOTAL : {{ liquidoTotal | currency }}</span>
                    </div>
                    <!-- <div class="col-md-4 text" >
                                            <span>TOTAL GASTOS VARIOS: {{ | currency}}</span>
                                        </div> -->
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>
        </div>
      </footer>
    </mat-tab>

    <form [formGroup]="formInfoVehiculos">
      <!-- GASTOS ADMINISTRATIVOS -->
      <mat-tab label="Gatos administrativos">
        <br />
        <div class="container mt-5">
          <div class="row align-items-center">
            <div class="col">
              <h2>Resumen gastos administrativos</h2>
              <br />

              <div
                class="row"
                *ngFor="let item of listaGastosAdminMes"
                style="width: 80%; margin-left: auto; margin-right: auto"
              >
                <div class="col-md-4">
                  <label for="">
                    <b>Fecha gasto : </b> &nbsp;&nbsp;
                    {{ item.fechaGasto }}</label
                  >
                </div>

                <div class="col-md-4">
                  <label for="">
                    <b> Descripcion gasto :</b> &nbsp;&nbsp;
                    {{ item.descripcion }}</label
                  >
                </div>

                <div class="col-md-4">
                  <label for="">
                    <b>valor gasto : </b> &nbsp;&nbsp;
                    {{ item.valor | currency }}</label
                  >
                </div>
              </div>
              <div class="mt-4" style="text-align: center">
                <span style="font-weight: bold">
                  Total de gastos adminitrativos ( {{ valores | currency }} )
                </span>
              </div>
            </div>
          </div>
        </div>
        <br />
        <br />
        <mat-accordion>
          <mat-expansion-panel
            (opened)="panelOpenState = true"
            (closed)="panelOpenState = false"
          >
            <mat-expansion-panel-header>
              <mat-panel-title> <b>Agregar gastos </b> </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="mt-3" style="text-align: center">
              <label for=""
                >INGRESAR INFORMACION DE GASTOS ADMINISTRATIVOS</label
              >
            </div>

            <div formArrayName="gastos_admin" class="mt-4">
              <div
                class="row"
                [formGroupName]="i"
                *ngFor="let direccion of gastos_admin.controls; let i = index"
              >
                <div class="col-md-4">
                  <div class="form-group">
                    <mat-form-field appearance="fill">
                      <mat-label>Ingrese la fecha del gasto</mat-label>
                      <input
                        matInput
                        [matDatepicker]="picker"
                        formControlName="fechaGasto"
                      />
                      <mat-datepicker #picker></mat-datepicker>
                      <mat-datepicker-toggle
                        matIconSuffix
                        [for]="picker"
                      ></mat-datepicker-toggle>
                    </mat-form-field>
                  </div>
                </div>

                <div class="col-md-4">
                  <mat-form-field appearance="fill" style="width: 50%">
                    <mat-label>Tipos de gastos</mat-label>
                    <mat-select
                      name="descripcion"
                      formControlName="descripcion"
                    >
                      <!-- [disabled]="item.rodamiento.fecha == this.Fecha" -->
                      <mat-option
                        *ngFor="let item of listGastos"
                        [value]="item"
                      >
                        {{ item }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>

                <div class="col-md-4">
                  <mat-form-field mat-form-field style="width: 50%">
                    <mat-label>Valor</mat-label>
                    <input matInput type="number" formControlName="valor" />
                  </mat-form-field>
                </div>
              </div>
            </div>
            <br />
            <button
              button
              mat-fab
              style="background-color: #eb7827; color: white"
              class="button"
              (click)="agregarGastosAdmin()"
            >
              <mat-icon>add</mat-icon>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <button
              button
              mat-fab
              cdkFocusInitial
              style="background-color: #eb7827; color: white"
              (click)="crearGastosAdmin()"
              class="button2"
              mat-dialog-close
            >
              <mat-icon>save</mat-icon>
            </button>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-tab>
      <mat-tab label="Mantenimiento y taller ">
        <br />
        <div class="container mt-5">
          <div class="row align-items-center">
            <div class="col">
              <h2>Resumen gastos de mantenimiento y taller</h2>
              <br />
              <div
                class="row"
                *ngFor="let item of listaGastosTallerMes"
                style="width: 80%; margin-left: auto; margin-right: auto"
              >
                <div class="col-md-4">
                  <label for="">
                    <b> Fecha mantenimiento:</b> &nbsp;&nbsp;
                    {{ item.fechaMantemiento }}</label
                  >
                </div>

                <div class="col-md-4">
                  <label for="">
                    <b> Descripcion:</b> &nbsp;&nbsp;
                    {{ item.descripcion_mantenimiento }}</label
                  >
                </div>

                <div class="col-md-4">
                  <label for="">
                    <b>valor: </b> &nbsp;&nbsp;
                    {{ item.valor_mantenimiento | currency }}</label
                  >
                </div>
              </div>
              <div class="mt-4" style="text-align: center">
                <span style="font-weight: bold">
                  Total de gastos de mantenimiento y taller(
                  {{ valoresMantenimientos | currency }} )
                </span>
              </div>
            </div>
          </div>
        </div>
        <br />
        <br />
        <mat-accordion>
          <mat-expansion-panel
            (opened)="panelOpenState = true"
            (closed)="panelOpenState = false"
          >
            <mat-expansion-panel-header>
              <mat-panel-title>
                <b>Agregar gastos de mantenimiento y taller</b>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="mt-3" style="text-align: center">
              <label for=""
                >INGRESAR INFORMACION DE GASTOS PARA MANTENIMIENTO Y TALLER
              </label>
            </div>
            <div formArrayName="mantenimiento_taller" class="mt-4">
              <div
                class="row"
                [formGroupName]="i"
                *ngFor="
                  let direccion of mantenimiento_taller.controls;
                  let i = index
                "
              >
                <div class="col-md-4">
                  <div class="form-group">
                    <mat-form-field appearance="fill">
                      <mat-label>Ingrese la fecha del gasto</mat-label>
                      <input
                        matInput
                        [matDatepicker]="picker"
                        formControlName="fechaMantemiento"
                      />
                      <mat-datepicker #picker></mat-datepicker>
                      <mat-datepicker-toggle
                        matIconSuffix
                        [for]="picker"
                      ></mat-datepicker-toggle>
                    </mat-form-field>
                  </div>
                </div>

                <div class="col-md-4">
                  <mat-form-field mat-form-field style="width: 50%">
                    <mat-label>Descripcion</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="descripcion_mantenimiento"
                      style="text-transform: capitalize"
                    />
                  </mat-form-field>
                </div>

                <div class="col-md-4">
                  <mat-form-field mat-form-field style="width: 50%">
                    <mat-label>Valor</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="valor_mantenimiento"
                    />
                  </mat-form-field>
                </div>
                <br />
                <div class="col-md-12" style="text-align: center">
                  <mat-form-field mat-form-field style="width: 50%">
                    <mat-label> Detalle</mat-label>
                    <textarea
                      matInput
                      formControlName="detalle"
                      style="text-transform: capitalize"
                    ></textarea>
                    <!-- <input matInput type="textarea" formControlName="detalle" style="text-transform:capitalize" /> -->
                  </mat-form-field>
                </div>
              </div>
            </div>
            <br />
            <button
              button
              mat-fab
              style="background-color: #eb7827; color: white"
              class="button"
              (click)="agregarMantenimiento()"
            >
              <mat-icon>add</mat-icon>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <button
              button
              mat-fab
              cdkFocusInitial
              style="background-color: #eb7827; color: white"
              (click)="crearMantenimientoTaller()"
              class="button2"
              mat-dialog-close
            >
              <mat-icon>save</mat-icon>
            </button>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-tab>

      <mat-tab label="Fitro mantenimiento y taller">
        <br />
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef>No.</th>
            <td mat-cell *matCellDef="let element">{{ element.position }}</td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="weight">
            <th mat-header-cell *matHeaderCellDef>Weight</th>
            <td mat-cell *matCellDef="let element">{{ element.weight }}</td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="symbol">
            <th mat-header-cell *matHeaderCellDef>Symbol</th>
            <td mat-cell *matCellDef="let element">{{ element.symbol }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </mat-tab>
    </form>
  </mat-tab-group>
</mat-dialog-content>
<br />

<mat-dialog-actions align="end">
  <button mat-button [mat-dialog-close]="true">CERRAR</button>
  <!-- <button mat-button [mat-dialog-close]="true" cdkFocusInitial>Install</button> -->
</mat-dialog-actions>
